#!/usr/bin/env bash
# This script displays information about subdomains.

if [ $# -lt 1 ]; then
  echo "Usage: $0 <domain> [subdomain]"
  exit 1
fi

domain="$1"
subdomain="$2"

declare -A subdomains
subdomains=(
  ["www"]="A"
  ["lb-01"]="A"
  ["web-01"]="A"
  ["web-02"]="A"
)

# Function to query and display information for a subdomain
query_subdomain() {
  local sub="$1"
  record_type="${subdomains[$sub]}"
  dest=$(dig +short "$sub.$domain" | head -n 1)
  if [ -n "$dest" ]; then
    echo "The subdomain $sub is a $record_type record and points to $dest"
  else
    echo "The subdomain $sub is not configured."
  fi
}

if [ -z "$subdomain" ]; then
  for sub in "${!subdomains[@]}"; do
    query_subdomain "$sub"
  done
else
  if [ -n "${subdomains[$subdomain]}" ]; then
    query_subdomain "$subdomain"
  else
    echo "Subdomain '$subdomain' is not configured or does not exist."
    exit 1
  fi
fi
